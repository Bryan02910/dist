import{g as S,a as E,s as T,_ as v,r,u as M,b as R,j as e,c as w,d as j,e as k,M as z,f as _,C as F,h as V,A as C,i as B}from"./index-UyDEpSKi.js";import{T as H,A as O}from"./ToastAutoHide-mD-74I2T.js";import{P as W}from"./Page-DWSL0diS.js";import{i as D}from"./index-tCDBB_r2.js";import{G as m}from"./Grid-CfjZ72w2.js";import{c as y,P as N}from"./ButtonBase-Bhi2RUyb.js";import{A as $}from"./Avatar-C462z94S.js";import{T as A,B as U}from"./Box-BLXI0_F0.js";import{u as q,F as G,T as P}from"./TextField-BGn-4xfW.js";import{I as K}from"./Grow-41TwNg0m.js";import{B as Y}from"./Button-CjDs8j-X.js";import"./Menu-9ysSaJL7.js";function J(s){return E("MuiInputAdornment",s)}const I=S("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var L;const Q=["children","className","component","disablePointerEvents","disableTypography","position","variant"],X=(s,t)=>{const{ownerState:o}=s;return[t.root,t[`position${j(o.position)}`],o.disablePointerEvents===!0&&t.disablePointerEvents,t[o.variant]]},Z=s=>{const{classes:t,disablePointerEvents:o,hiddenLabel:a,position:i,size:d,variant:l}=s,p={root:["root",o&&"disablePointerEvents",i&&`position${j(i)}`,l,a&&"hiddenLabel",d&&`size${j(d)}`]};return k(p,J,t)},ee=T("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:X})(({theme:s,ownerState:t})=>v({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(s.vars||s).palette.action.active},t.variant==="filled"&&{[`&.${I.positionStart}&:not(.${I.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),te=r.forwardRef(function(t,o){const a=M({props:t,name:"MuiInputAdornment"}),{children:i,className:d,component:l="div",disablePointerEvents:p=!1,disableTypography:f=!1,position:h,variant:x}=a,g=R(a,Q),c=q()||{};let n=x;x&&c.variant,c&&!n&&(n=c.variant);const u=v({},a,{hiddenLabel:c.hiddenLabel,size:c.size,disablePointerEvents:p,position:h,variant:n}),b=Z(u);return e.jsx(G.Provider,{value:null,children:e.jsx(ee,v({as:l,ownerState:u,className:w(b.root,d),ref:o},g,{children:typeof i=="string"&&!f?e.jsx(A,{color:"text.secondary",children:i}):e.jsxs(r.Fragment,{children:[h==="start"?L||(L=e.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})}),se=y(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined"),ne=y(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),oe=y(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),ge=()=>{const{globalDispatch:s}=r.useContext(z),[t,o]=r.useState({username:"",password:""}),[a,i]=r.useState(!1),[d,l]=r.useState(!1),[p,f]=r.useState({ident:null,message:null,type:null}),{push:h}=_(),x=n=>{const{name:u,value:b}=n.target;o({...t,[u]:b})},g=()=>{l(!0),O().post("/login",t).then(({data:n})=>{const u=n.rol;s({type:C.LOGIN_OK,payload:{...n,role:u}}),l(!1),h("/app")}).catch(({response:n})=>{s({type:C.LOGIN_FAIL}),f({ident:new Date().getTime(),message:n.data,type:"error"}),l(!1)})},c=()=>{s({type:B.CLEAR_APP_STATE}),localStorage.clear()};return r.useEffect(c,[]),e.jsxs(W,{title:"Chapina | Login",children:[e.jsx(H,{message:p}),e.jsxs(m,{container:!0,component:"main",sx:{height:"100vh",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(F,{}),e.jsxs(m,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",children:[e.jsx(m,{item:!0,xs:12,sm:5,md:5,sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundImage:`url(${D.Logo})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",maxWidth:"400px"}}),e.jsxs(m,{item:!0,xs:12,sm:7,md:5,component:N,elevation:6,square:!0,sx:{padding:3,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#e0f7fa",borderRadius:2,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",maxWidth:"400px",margin:"auto"},children:[e.jsx($,{sx:{m:1,bgcolor:"secondary.main"},children:e.jsx(se,{})}),e.jsx(A,{component:"h1",variant:"h5",sx:{mb:2},children:"Iniciar Sesión"}),e.jsxs(U,{component:"form",noValidate:!0,sx:{mt:1,width:"100%"},children:[e.jsx(P,{required:!0,fullWidth:!0,autoFocus:!0,value:t.username,onChange:x,variant:"outlined",margin:"normal",label:"Correo electrónico",name:"username",autoComplete:"email",sx:{backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:1}}),e.jsx(P,{required:!0,fullWidth:!0,variant:"outlined",value:t.password,onChange:x,margin:"normal",name:"password",label:"Contraseña",type:a?"text":"password",autoComplete:"current-password",sx:{backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:1},InputProps:{endAdornment:e.jsx(te,{position:"end",children:e.jsx(K,{onClick:()=>i(!a),onMouseDown:n=>{n.preventDefault()},children:a?e.jsx(ne,{}):e.jsx(oe,{})})})}}),d&&e.jsx(V,{sx:{mt:2,mb:2}}),e.jsx(Y,{fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2,borderRadius:2,fontWeight:"bold",textTransform:"none"},onClick:g,children:"Iniciar sesión"}),e.jsx(m,{container:!0,justifyContent:"flex-end",children:e.jsx(m,{item:!0})})]})]})]})]})]})};export{ge as default};
